<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Expense</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1>Group Expense Manager</h1>
</header>

<main>
  <section class="section">
    <h2>Add Expense</h2>
    <div class="flex-row">
      <div>
        <label for="expense-payer">Payer</label>
        <select id="expense-payer"></select>
      </div>
      <div>
        <label for="expense-amount">Amount (â‚¹)</label>
        <input type="number" id="expense-amount" min="0" step="0.01">
      </div>
      <div>
        <label for="expense-category">Category</label>
        <select id="expense-category">
          <option>Food</option>
          <option>Rent</option>
          <option>Travel</option>
          <option>Utilities</option>
          <option>Others</option>
        </select>
      </div>
    </div>
    <button id="add-expense-btn">Add Expense</button>
    <p class="error" id="expense-error"></p>
    <ul id="expenses-list"></ul>
  </section>

  <nav>
    <a href="index.html">Create Group</a>
    <a href="balance.html">Balances</a>
  </nav>
</main>

<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', populatePayerDropdown);
document.getElementById('add-expense-btn').addEventListener('click', () => {
    const error = document.getElementById('expense-error');
    error.textContent = '';

    const payer = document.getElementById('expense-payer').value;
    const amount = parseFloat(document.getElementById('expense-amount').value);
    const category = document.getElementById('expense-category').value;

    if (!payer) { error.textContent = 'Select a payer'; return; }
    if (isNaN(amount) || amount <= 0) { error.textContent = 'Enter valid amount'; return; }

    addExpense(payer, amount, category);
    document.getElementById('expense-amount').value = '';
    renderExpenses();
});

renderExpenses();
</script>
</body>
</html>
